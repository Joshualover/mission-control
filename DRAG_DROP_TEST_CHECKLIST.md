# 拖拽功能测试清单

## 测试环境
- 项目路径: /mnt/data/opencode-work/mission-control
- 开发服务器: http://localhost:3000
- 测试日期: 2026-02-21

## 功能测试

### ✅ 基础功能测试

- [x] 安装 @dnd-kit/core
- [x] 安装 @dnd-kit/sortable
- [x] 安装 @dnd-kit/utilities
- [x] 创建 DraggableTaskCard 组件
- [x] 集成 DndContext 到日历页面
- [x] 实现拖拽排序逻辑
- [x] 添加 localStorage 持久化
- [x] 保持搜索过滤功能兼容

### 🧪 手动测试项目

#### 桌面端测试
- [ ] 鼠标悬停在拖动手柄上，检查颜色变化
- [ ] 点击并拖动任务卡片
- [ ] 验证拖拽时的视觉反馈（放大、阴影、边框）
- [ ] 拖拽到新位置并松开
- [ ] 刷新页面，验证顺序已保存
- [ ] 测试搜索功能与拖拽兼容性
- [ ] 测试过滤器与拖拽兼容性
- [ ] 测试导出按钮仍然可用

#### 移动端测试
- [ ] 触摸拖动手柄
- [ ] 拖动任务到新位置
- [ ] 验证触摸拖拽流畅度
- [ ] 测试在不同屏幕尺寸下的表现

#### 边界情况测试
- [ ] 拖拽第一个任务到最后
- [ ] 拖拽最后一个任务到最前
- [ ] 拖拽到中间位置
- [ ] 快速连续拖拽多个任务
- [ ] 拖拽时使用搜索/过滤器
- [ ] 清空 localStorage 后重新加载

#### 性能测试
- [ ] 添加多个任务（10+）测试性能
- [ ] 快速拖拽检查是否有卡顿
- [ ] 检查动画流畅度（60fps）
- [ ] 验证内存使用是否正常

#### 样式测试
- [ ] 验证紫色主题保持一致
- [ ] 检查拖拽时的阴影效果
- [ ] 验证放大动画（1.03 scale）
- [ ] 检查拖动手柄样式
- [ ] 验证响应式布局

## 视觉效果验证

### 拖拽状态
- [ ] 卡片放大 1.03 倍
- [ ] 半透明紫色阴影
- [ ] 边框变为紫色 (#667eea)
- [ ] 轻微旋转 (1 degree)
- [ ] z-index 提升

### 悬停状态
- [ ] 拖动手柄颜色变化（灰→紫）
- [ ] 手柄放大 1.2 倍
- [ ] 导出按钮悬停效果
- [ ] 鼠标指针变为 grabbing

## 浏览器兼容性测试

- [ ] Chrome/Edge (主要测试)
- [ ] Firefox
- [ ] Safari (如可用)
- [ ] 移动浏览器

## 已知问题

- 无

## 测试结果

### 测试通过项目
- ✅ 所有组件创建完成
- ✅ 开发服务器运行正常
- ✅ 依赖包安装成功
- ✅ TypeScript 编译无错误
- ✅ 与现有功能集成成功

### 待测试项目
- ⏳ 实际浏览器拖拽操作
- ⏳ 移动端触摸拖拽
- ⏳ 不同屏幕尺寸测试

## 测试命令

```bash
# 开发服务器
cd /mnt/data/opencode-work/mission-control
npm run dev

# 访问地址
http://localhost:3000/calendar

# 清除 localStorage（如需重置）
localStorage.clear()

# TypeScript 类型检查
npx tsc --noEmit

# 生产构建测试
npm run build
```

## 回归测试清单

确保拖拽功能不会破坏现有功能：

- [ ] 搜索功能正常
- [ ] 状态过滤器正常
- [ ] 类型过滤器正常
- [ ] 导出日历功能正常
- [ ] 导出单个任务功能正常
- [ ] 任务统计显示正确
- [ ] 日期显示正确
- [ ] 导航菜单正常

## 性能基准

- 拖拽响应时间: < 16ms (60fps)
- 动画流畅度: 60fps
- 内存增长: < 10MB (100个任务)
- localStorage 保存: < 10ms

## 测试完成标准

- [ ] 所有手动测试项目通过
- [ ] 浏览器兼容性测试通过
- [ ] 性能测试达标
- [ ] 无回归问题
- [ ] 代码审查通过
